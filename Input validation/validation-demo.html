<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Input Validation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 2rem;
        }
        h2 {
            margin-top: 2rem;
        }
        form {
            margin-bottom: 1rem;
        }
        .output {
            margin-top: 5px;
            min-height: 30px;
            border: 1px solid #ccc;
            padding: 10px;
            background: #f9f9f9;
        }
        .bad {
            background: #ffe5e5;
        }
        .good {
            background: #e5ffe5;
        }
    </style>
</head>
<body>
    <h1>Input Validation Demo</h1>

    <!-- Vulnerable Form with no validation -->
    <h2>Vulnerable Form</h2>
    <form id="badForm">
        <label for="badInput">Enter text:</label>
        <input type="text" id="badInput" name="badInput">
        <button type="submit">Submit</button>
    </form>
    <div id="badOutput" class="output bad"></div>

    <!-- Secure Form with input validation -->
    <h2>Secure Form</h2>
    <form id="goodForm">
        <label for="goodInput">Enter text:</label>
        <input type="text" id="goodInput" name="goodInput">
        <button type="submit">Submit</button>
    </form>
    <div id="goodOutput" class="output good"></div>

    <script>
        // Vulnerable Form
        document.getElementById("badForm").addEventListener("submit", function(event) {
            event.preventDefault();
            const input = document.getElementById("badInput").value;
            // Direct injection into the DOM without validation
            document.getElementById("badOutput").innerHTML = "You entered: " + input;
        });

        // Secure Form
        document.getElementById("goodForm").addEventListener("submit", function(event) {
            event.preventDefault();
            const input = document.getElementById("goodInput").value;
            //Validation: Only allowing letters, numbers, and spaces
            if(!/^[a-zA-Z0-9 ]+$/.test(input)) {
                document.getElementById("goodOutput").innerText = "Invalid input! Only letters and numbers allowed.";
                return;
            }
            // Sanitization: Escaping HTML special characters
            const sanitized = sanitizeInput(input);
            document.getElementById("goodOutput").innerText = "You entered: " + sanitized;
        });

        //Helper function to sanitize input
        function sanitizeInput(input) {
            const div = document.createElement("div");
            div.innerText = input;
            return div.innerHTML;
        }
    </script>
</body>
</html>
